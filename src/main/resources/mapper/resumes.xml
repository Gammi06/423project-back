<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="site.metacoding.miniproject1.domain.resumes.ResumesDao">

	<select id="updateById"
		resultType="site.metacoding.miniproject1.web.dto.response.resume.ResumeUpdateDto">
		SELECT r.id, r.title, u.photo, u.user_name, u.email, u.phone_number, r.intro
		FROM resumes r
		LEFT OUTER JOIN users u
		ON r.user_id = u.id
		WHERE r.id = #{id}
	</select>

	<select id="ListById"
		resultType="site.metacoding.miniproject1.web.dto.response.resume.ResumeListDto">
		SELECT id, title, created, status_id FROM resumes
		WHERE user_id = #{id}
	</select>
	
	<insert id="findAll">
		SELECT u.id, r.title, u.user_name, u.email, u.phone_number, r.intro
		FROM users u LEFT OUTER JOIN resumes r
   		ON r.user_id = u.id
	</insert>

	<delete id="deleteById">
		DELETE FROM resumes WHERE id = #{id}
	</delete>
	
	<select id="findById" resultType="site.metacoding.miniproject1.domain.resumes.Resumes">
   		SELECT id, user_id, positions_code_id, title, intro, status_id, created 
		FROM resumes
		WHERE id = #{id}
	</select>
	
	<update id="update">
		UPDATE resumes
		SET title = #{title}, created = #{created}
		WHERE id = #{id}
	</update>

</mapper>